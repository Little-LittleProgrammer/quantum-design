function ee(d,C){for(var b=0;b<C.length;b++){const p=C[b];if(typeof p!="string"&&!Array.isArray(p)){for(const h in p)if(h!=="default"&&!(h in d)){const O=Object.getOwnPropertyDescriptor(p,h);O&&Object.defineProperty(d,h,O.get?O:{enumerable:!0,get:()=>p[h]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}var yn={};(function(){var d=tinymce.util.Tools.resolve("tinymce.PluginManager"),C=tinymce.util.Tools.resolve("tinymce.util.VK"),b=function(n){var t=typeof n;return n===null?"null":t==="object"&&(Array.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(n)||n.constructor&&n.constructor.name==="String")?"string":t},p=function(n){return function(t){return b(t)===n}},h=function(n){return function(t){return typeof t===n}},O=function(n){return function(t){return n===t}},T=p("string"),V=p("array"),xn=O(null),dn=h("boolean"),bn=h("function"),k=function(){},y=function(n){return function(){return n}},On=function(n){return n},Tn=function(n,t){return n===t},A=y(!1),N=y(!0),L=function(){return P},P=function(){var n=function(r){return r()},t=On,e={fold:function(r,a){return r()},isSome:A,isNone:N,getOr:t,getOrThunk:n,getOrDie:function(r){throw new Error(r||"error: getOrDie called on none.")},getOrNull:y(null),getOrUndefined:y(void 0),or:t,orThunk:n,map:L,each:k,bind:L,exists:A,forall:N,filter:function(){return L()},toArray:function(){return[]},toString:y("none()")};return e}(),_=function(n){var t=y(n),e=function(){return a},r=function(o){return o(n)},a={fold:function(o,i){return i(n)},isSome:N,isNone:A,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(o){return _(o(n))},each:function(o){o(n)},bind:r,exists:r,forall:r,filter:function(o){return o(n)?a:P},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return a},Cn=function(n){return n==null?P:_(n)},u={some:_,none:L,from:Cn},Ln=Array.prototype.indexOf,Sn=Array.prototype.push,wn=function(n,t){return Ln.call(n,t)},An=function(n,t){return wn(n,t)>-1},Nn=function(n,t){for(var e=n.length,r=new Array(e),a=0;a<e;a++){var o=n[a];r[a]=t(o,a)}return r},Pn=function(n,t){for(var e=0,r=n.length;e<r;e++){var a=n[e];t(a,e)}},_n=function(n,t,e){return Pn(n,function(r,a){e=t(e,r,a)}),e},q=function(n){for(var t=[],e=0,r=n.length;e<r;++e){if(!V(n[e]))throw new Error("Arr.flatten item "+e+" was not an array, input: "+n);Sn.apply(t,n[e])}return t},Dn=function(n,t){return q(Nn(n,t))},W=function(n,t){for(var e=0;e<n.length;e++){var r=t(n[e],e);if(r.isSome())return r}return u.none()},G=function(n,t,e){return e===void 0&&(e=Tn),n.exists(function(r){return e(r,t)})},Rn=function(n){for(var t=[],e=function(a){t.push(a)},r=0;r<n.length;r++)n[r].each(e);return t},D=function(n,t){return n?u.some(t):u.none()},H=function(n){var t=n.getParam("link_assume_external_targets",!1);return dn(t)&&t?1:T(t)&&(t==="http"||t==="https")?t:0},In=function(n){return n.getParam("link_context_toolbar",!1,"boolean")},Mn=function(n){return n.getParam("link_list")},J=function(n){return n.getParam("default_link_target")},Q=function(n){return n.getParam("target_list",!0)},X=function(n){return n.getParam("rel_list",[],"array")},Un=function(n){return n.getParam("link_class_list",[],"array")},En=function(n){return n.getParam("link_title",!0,"boolean")},Y=function(n){return n.getParam("allow_unsafe_link_target",!1,"boolean")},zn=function(n){return n.getParam("link_quicklink",!1,"boolean")},Bn=function(n){return n.getParam("link_default_protocol","http","string")},S=tinymce.util.Tools.resolve("tinymce.util.Tools"),R=function(n){return T(n.value)?n.value:""},Fn=function(n){return T(n.text)?n.text:T(n.title)?n.title:""},Z=function(n,t){var e=[];return S.each(n,function(r){var a=Fn(r);if(r.menu!==void 0){var o=Z(r.menu,t);e.push({text:a,items:o})}else{var i=t(r);e.push({text:a,value:i})}}),e},nn=function(n){return n===void 0&&(n=R),function(t){return u.from(t).map(function(e){return Z(e,n)})}},$n=function(n){return nn(R)(n)},Kn=function(n,t){return function(e){return{name:n,type:"listbox",label:t,items:e}}},v={sanitize:$n,sanitizeWith:nn,createUi:Kn,getValue:R},g=function(){return g=Object.assign||function(t){for(var e,r=1,a=arguments.length;r<a;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},g.apply(this,arguments)},jn=Object.keys,Vn=Object.hasOwnProperty,qn=function(n,t){for(var e=jn(n),r=0,a=e.length;r<a;r++){var o=e[r],i=n[o];t(i,o)}},Wn=function(n){return function(t,e){n[e]=t}},Gn=function(n,t,e,r){var a={};return qn(n,function(o,i){(t(o,i)?e:r)(o,i)}),a},Hn=function(n,t){var e={};return Gn(n,t,Wn(e),k),e},I=function(n,t){return Vn.call(n,t)},Jn=function(n,t){return I(n,t)&&n[t]!==void 0&&n[t]!==null},Qn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Xn=tinymce.util.Tools.resolve("tinymce.util.URI"),tn=function(n){return n&&n.nodeName.toLowerCase()==="a"},en=function(n){return tn(n)&&!!M(n)},rn=function(n,t){if(n.collapsed)return[];var e=n.cloneContents(),r=new Qn(e.firstChild,e),a=[],o=e.firstChild;do t(o)&&a.push(o);while(o=r.next());return a},an=function(n){return/^\w+:/i.test(n)},M=function(n){var t=n.getAttribute("data-mce-href");return t||n.getAttribute("href")},on=function(n,t){var e=["noopener"],r=n?n.split(/\s+/):[],a=function(l){return S.trim(l.sort().join(" "))},o=function(l){return l=i(l),l.length>0?l.concat(e):e},i=function(l){return l.filter(function(s){return S.inArray(e,s)===-1})},c=t?o(r):i(r);return c.length>0?a(c):""},Yn=function(n){return n.replace(/\uFEFF/g,"")},m=function(n,t){return t=t||n.selection.getNode(),U(t)?n.dom.select("a[href]",t)[0]:n.dom.getParent(t,"a[href]")},un=function(n,t){var e=t?t.innerText||t.textContent:n.getContent({format:"text"});return Yn(e)},ln=function(n){return S.grep(n,en).length>0},Zn=function(n){return rn(n,en).length>0},cn=function(n){var t=n.schema.getTextInlineElements(),e=function(a){return a.nodeType===1&&!tn(a)&&!I(t,a.nodeName.toLowerCase())},r=rn(n.selection.getRng(),e);return r.length===0},U=function(n){return n&&n.nodeName==="FIGURE"&&/\bimage\b/i.test(n.className)},nt=function(n){var t=["title","rel","class","target"];return _n(t,function(e,r){return n[r].each(function(a){e[r]=a.length>0?a:null}),e},{href:n.href})},tt=function(n,t){return(t==="http"||t==="https")&&!an(n)?t+"://"+n:n},et=function(n,t){var e=g({},t);if(!(X(n).length>0)&&Y(n)===!1){var r=on(e.rel,e.target==="_blank");e.rel=r||null}return u.from(e.target).isNone()&&Q(n)===!1&&(e.target=J(n)),e.href=tt(e.href,H(n)),e},rt=function(n,t,e,r){e.each(function(a){I(t,"innerText")?t.innerText=a:t.textContent=a}),n.dom.setAttribs(t,r),n.selection.select(t)},at=function(n,t,e,r){U(t)?ft(n,t,r):e.fold(function(){n.execCommand("mceInsertLink",!1,r)},function(a){n.insertContent(n.dom.createHTML("a",r,n.dom.encode(a)))})},ot=function(n,t,e){var r=n.selection.getNode(),a=m(n,r),o=et(n,nt(e));n.undoManager.transact(function(){e.href===t.href&&t.attach(),a?(n.focus(),rt(n,a,e.text,o)):at(n,r,e.text,o)})},ut=function(n){var t=n.dom,e=n.selection,r=e.getBookmark(),a=e.getRng().cloneRange(),o=t.getParent(a.startContainer,"a[href]",n.getBody()),i=t.getParent(a.endContainer,"a[href]",n.getBody());o&&a.setStartBefore(o),i&&a.setEndAfter(i),e.setRng(a),n.execCommand("unlink"),e.moveToBookmark(r)},it=function(n){n.undoManager.transact(function(){var t=n.selection.getNode();U(t)?st(n,t):ut(n),n.focus()})},lt=function(n){var t=n.class,e=n.href,r=n.rel,a=n.target,o=n.text,i=n.title;return Hn({class:t.getOrNull(),href:e,rel:r.getOrNull(),target:a.getOrNull(),text:o.getOrNull(),title:i.getOrNull()},function(c,l){return xn(c)===!1})},ct=function(n,t){var e=t.href;return g(g({},t),{href:Xn.isDomSafe(e,"a",n.settings)?e:""})},sn=function(n,t,e){var r=ct(n,e);n.hasPlugin("rtc",!0)?n.execCommand("createlink",!1,lt(r)):ot(n,t,r)},w=function(n){n.hasPlugin("rtc",!0)?n.execCommand("unlink"):it(n)},st=function(n,t){var e=n.dom.select("img",t)[0];if(e){var r=n.dom.getParents(e,"a[href]",t)[0];r&&(r.parentNode.insertBefore(e,r),n.dom.remove(r))}},ft=function(n,t,e){var r=n.dom.select("img",t)[0];if(r){var a=n.dom.create("a",e);r.parentNode.insertBefore(a,r),a.appendChild(r)}},vt=function(n){return Jn(n,"items")},fn=function(n,t){return W(t,function(e){return vt(e)?fn(n,e.items):D(e.value===n,e)})},vn=function(n,t,e,r){var a=r[t],o=n.length>0;return a!==void 0?fn(a,e).map(function(i){return{url:{value:i.value,meta:{text:o?n:i.text,attach:k}},text:o?n:i.text}}):u.none()},gt=function(n,t){return t==="link"?n.link:t==="anchor"?n.anchor:u.none()},mt=function(n,t){var e={text:n.text,title:n.title},r=function(l){return D(e.title.length<=0,u.from(l.meta.title).getOr(""))},a=function(l){return D(e.text.length<=0,u.from(l.meta.text).getOr(l.value))},o=function(l){var s=a(l.url),f=r(l.url);return s.isSome()||f.isSome()?u.some(g(g({},s.map(function(x){return{text:x}}).getOr({})),f.map(function(x){return{title:x}}).getOr({}))):u.none()},i=function(l,s){var f=gt(t,s.name).getOr([]);return vn(e.text,s.name,f,l)},c=function(l,s){var f=s.name;return f==="url"?o(l()):An(["anchor","link"],f)?i(l(),s):((f==="text"||f==="title")&&(e[f]=l()[f]),u.none())};return{onChange:c}},pt={init:mt,getDelta:vn},ht=tinymce.util.Tools.resolve("tinymce.util.Delay"),E=tinymce.util.Tools.resolve("tinymce.util.Promise"),kt=function(n,t,e){var r=n.selection.getRng();ht.setEditorTimeout(n,function(){n.windowManager.confirm(t,function(a){n.selection.setRng(r),e(a)})})},yt=function(n){var t=n.href,e=t.indexOf("@")>0&&t.indexOf("/")===-1&&t.indexOf("mailto:")===-1;return e?u.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(r){return g(g({},r),{href:"mailto:"+t})}}):u.none()},xt=function(n,t){return function(e){var r=e.href,a=n===1&&!an(r)||n===0&&/^\s*www(\.|\d\.)/i.test(r);return a?u.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+t+":// prefix?",preprocess:function(o){return g(g({},o),{href:t+"://"+r})}}):u.none()}},dt=function(n,t){return W([yt,xt(H(n),Bn(n))],function(e){return e(t)}).fold(function(){return E.resolve(t)},function(e){return new E(function(r){kt(n,e.message,function(a){r(a?e.preprocess(t):t)})})})},bt={preprocess:dt},Ot=function(n){var t=n.dom.select("a:not([href])"),e=Dn(t,function(r){var a=r.name||r.id;return a?[{text:a,value:"#"+a}]:[]});return e.length>0?u.some([{text:"None",value:""}].concat(e)):u.none()},Tt={getAnchors:Ot},Ct=function(n){var t=Un(n);return t.length>0?v.sanitize(t):u.none()},Lt={getClasses:Ct},St=tinymce.util.Tools.resolve("tinymce.util.XHR"),wt=function(n){try{return u.some(JSON.parse(n))}catch(t){return u.none()}},At=function(n){var t=function(r){return n.convertURL(r.value||r.url,"href")},e=Mn(n);return new E(function(r){T(e)?St.send({url:e,success:function(a){return r(wt(a))},error:function(a){return r(u.none())}}):bn(e)?e(function(a){return r(u.some(a))}):r(u.from(e))}).then(function(r){return r.bind(v.sanitizeWith(t)).map(function(a){if(a.length>0){var o=[{text:"None",value:""}];return o.concat(a)}else return a})})},Nt={getLinks:At},Pt=function(n,t){var e=X(n);if(e.length>0){var r=G(t,"_blank"),a=Y(n)===!1,o=function(c){return on(v.getValue(c),r)},i=a?v.sanitizeWith(o):v.sanitize;return i(e)}return u.none()},_t={getRels:Pt},gn=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Dt=function(n){var t=Q(n);return V(t)?v.sanitize(t).orThunk(function(){return u.some(gn)}):t===!1?u.none():u.some(gn)},Rt={getTargets:Dt},z=function(n,t,e){var r=n.getAttrib(t,e);return r!==null&&r.length>0?u.some(r):u.none()},It=function(n,t){var e=n.dom,r=cn(n),a=r?u.some(un(n.selection,t)):u.none(),o=t?u.some(e.getAttrib(t,"href")):u.none(),i=t?u.from(e.getAttrib(t,"target")):u.none(),c=z(e,t,"rel"),l=z(e,t,"class"),s=z(e,t,"title");return{url:o,text:a,title:s,target:i,rel:c,linkClass:l}},Mt=function(n,t){return Nt.getLinks(n).then(function(e){var r=It(n,t);return{anchor:r,catalogs:{targets:Rt.getTargets(n),rels:_t.getRels(n,r.target),classes:Lt.getClasses(n),anchor:Tt.getAnchors(n),link:e},optNode:u.from(t),flags:{titleEnabled:En(n)}}})},Ut={collect:Mt},Et=function(n,t){return function(e){var r=e.getData();if(!r.url.value){w(n),e.close();return}var a=function(c){return u.from(r[c]).filter(function(l){return!G(t.anchor[c],l)})},o={href:r.url.value,text:a("text"),target:a("target"),rel:a("rel"),class:a("linkClass"),title:a("title")},i={href:r.url.value,attach:r.url.meta!==void 0&&r.url.meta.attach?r.url.meta.attach:k};bt.preprocess(n,o).then(function(c){sn(n,i,c)}),e.close()}},zt=function(n){var t=m(n);return Ut.collect(n,t)},Bt=function(n,t){var e=n.anchor,r=e.url.getOr("");return{url:{value:r,meta:{original:{value:r}}},text:e.text.getOr(""),title:e.title.getOr(""),anchor:r,link:r,rel:e.rel.getOr(""),target:e.target.or(t).getOr(""),linkClass:e.linkClass.getOr("")}},Ft=function(n,t,e){var r=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],a=n.anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),o=n.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],i=u.from(J(e)),c=Bt(n,i),l=n.catalogs,s=pt.init(c,l),f={type:"panel",items:q([r,a,o,Rn([l.anchor.map(v.createUi("anchor","Anchors")),l.rels.map(v.createUi("rel","Rel")),l.targets.map(v.createUi("target","Open link in...")),l.link.map(v.createUi("link","Link list")),l.classes.map(v.createUi("linkClass","Class"))])])};return{title:"Insert/Edit Link",size:"normal",body:f,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:c,onChange:function(x,Zt){var ne=Zt.name;s.onChange(x.getData,{name:ne}).each(function(te){x.setData(te)})},onSubmit:t}},$t=function(n){var t=zt(n);t.then(function(e){var r=Et(n,e);return Ft(e,r,n)}).then(function(e){n.windowManager.open(e)})},Kt=function(n,t){document.body.appendChild(n),n.dispatchEvent(t),document.body.removeChild(n)},jt=function(n){var t=document.createElement("a");t.target="_blank",t.href=n,t.rel="noreferrer noopener";var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Kt(t,e)},mn=function(n,t){return n.dom.getParent(t,"a[href]")},pn=function(n){return mn(n,n.selection.getStart())},Vt=function(n){return n.altKey===!0&&n.shiftKey===!1&&n.ctrlKey===!1&&n.metaKey===!1},B=function(n,t){if(t){var e=M(t);if(/^#/.test(e)){var r=n.$(e);r.length&&n.selection.scrollIntoView(r[0],!0)}else jt(t.href)}},F=function(n){return function(){$t(n)}},$=function(n){return function(){B(n,pn(n))}},qt=function(n){n.on("click",function(t){var e=mn(n,t.target);e&&C.metaKeyPressed(t)&&(t.preventDefault(),B(n,e))}),n.on("keydown",function(t){var e=pn(n);e&&t.keyCode===13&&Vt(t)&&(t.preventDefault(),B(n,e))})},K=function(n,t){return n.on("NodeChange",t),function(){return n.off("NodeChange",t)}},j=function(n){return function(t){var e=function(){return t.setActive(!n.mode.isReadOnly()&&m(n,n.selection.getNode())!==null)};return e(),K(n,e)}},hn=function(n){return function(t){var e=function(){return t.setDisabled(m(n,n.selection.getNode())===null)};return e(),K(n,e)}},kn=function(n){return function(t){var e=function(a){return ln(a)||Zn(n.selection.getRng())},r=n.dom.getParents(n.selection.getStart());return t.setDisabled(!e(r)),K(n,function(a){return t.setDisabled(!e(a.parents))})}},Wt=function(n){n.addCommand("mceLink",function(){zn(n)?n.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):F(n)()})},Gt=function(n){n.addShortcut("Meta+K","",function(){n.execCommand("mceLink")})},Ht=function(n){n.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:F(n),onSetup:j(n)}),n.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:$(n),onSetup:hn(n)}),n.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return w(n)},onSetup:kn(n)})},Jt=function(n){n.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:$(n),onSetup:hn(n)}),n.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:F(n)}),n.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return w(n)},onSetup:kn(n)})},Qt=function(n){var t="link unlink openlink",e="link";n.ui.registry.addContextMenu("link",{update:function(r){return ln(n.dom.getParents(r,"a"))?t:e}})},Xt=function(n){var t=function(a){a.selection.collapse(!1)},e=function(a){var o=n.selection.getNode();return a.setDisabled(!m(n,o)),k},r=function(a){var o=m(n),i=cn(n);if(!o&&i){var c=un(n.selection,o);return u.some(c.length>0?c:a)}else return u.none()};n.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:j(n)},label:"Link",predicate:function(a){return!!m(n,a)&&In(n)},initValue:function(){var a=m(n);return a?M(a):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(a){var o=n.selection.getNode();return a.setActive(!!m(n,o)),j(n)(a)},onAction:function(a){var o=a.getValue(),i=r(o),c={href:o,attach:k};sn(n,c,{href:o,text:i,title:u.none(),rel:u.none(),target:u.none(),class:u.none()}),t(n),a.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:e,onAction:function(a){w(n),a.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:e,onAction:function(a){$(n)(),a.hide()}}]})};function Yt(){d.add("link",function(n){Ht(n),Jt(n),Qt(n),Xt(n),qt(n),Wt(n),Gt(n)})}Yt()})();const re=ee({__proto__:null,default:yn},[yn]);export{re as i};
